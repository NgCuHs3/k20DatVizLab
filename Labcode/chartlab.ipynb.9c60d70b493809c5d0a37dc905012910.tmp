df_sunburst_plot = observe_regions_data[['region','location','population','new_cases']].groupby('location').last()

df_sunburst_plot.reset_index(inplace=True)


df_sunburst_plot.rename(columns={'new_cases':'New Cases'},inplace=True)

fig = px.sunburst(df_sunburst_plot, path = ['region','location'], values ='population', hover_name = 'location', color = 'New Cases', height = 550, width = 600
,color_continuous_scale='aggrnyl')

fig.update_layout(title_text='The pie plot shows the proportions of the population of the <br>regions and countries in that region and the number <br>of infections as of 2/11/2021',
margin={"r":0,"t":100,"l":3,"b":3},paper_bgcolor='rgba(0,0,0,0)',
    plot_bgcolor='rgba(0,0,0,0)')

fig.show()
fig.write_html("./elementHTML_export/sunburst.html",include_plotlyjs=False,full_html=False)